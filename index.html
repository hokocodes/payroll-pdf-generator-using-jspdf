<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>

    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js">
    </script>
    <link rel="stylesheet" href="style.css">
</head>

<body>


    <div class="container">

        <input type="button" value="Convert HTML to PDF" onclick="convertHTMLtoPDF()">
        <div id="divID">
            <form>
                <h1>Employee Pay Stub</h1>
                <div class="heading">
                    <div class="employer">
                        <label for="employername">
                            <h3>Employer Name</h3>
                        </label>
                        <input type="text" id="employername" name="employername">
                        <br>
                        <label for="employeraddress">
                            <h3>Employer Address</h3>
                        </label>
                        <input type="text" id="employeraddress" name="employeraddress">
                        <br>
                        <label for="employername">
                            <h3>Employer Telephone</h3>
                        </label>
                        <input type="text" id="employertelephone" name="employertelephone">
                        <br>
                        <label for="employername">
                            <h3>Check #</h3>
                        </label>
                        <input type="text" id="check#" name="check#">
                        <br>
                        <label for="employername">
                            <h3>Pay Period</h3>
                        </label>
                        <div class="payperiod">
                            <input type="text" id="payperiod1" name="payperiod1">
                            <p class="hyphen">-</p>
                            <input type="text" id="payperiod2" name="payperiod2">
                        </div>

                    </div>
                    <div class="employee">
                        <label for="employeename">
                            <h3>Employee Name</h3>
                        </label>
                        <input type="text" id="employeename" name="employeename">
                        <br>
                        <label for="employeraddress">
                            <h3>Employee Address</h3>
                        </label>
                        <input type="text" id="employeeaddress" name="employeeaddress">
                        <br>
                        <label for="employername">
                            <h3>Employee #</h3>
                        </label>
                        <input type="text" id="employee#" name="employee#">
                        <br>
                        <label for="employername">
                            <h3>SSN (Last 4 Digits)</h3>
                        </label>
                        <input type="text" id="ssn" name="ssn">
                        <br>
                        <label for="employername">
                            <h3>Pay Date</h3>
                        </label>
                        <input type="text" id="paydate" name="paydate">
                    </div>
                </div>
                <br>
                <table>
                    <tr>
                        <th>Gross Earnings</th>
                        <th>Rate</th>
                        <th>Hours</th>
                        <th>Current Total</th>
                        <th>Year to Date</th>
                    </tr>
                    <tr>
                        <td>Regular</td>
                        <td>
                            <input type="text" id="rate" name="rate">
                        </td>
                        <td>
                            <input type="text" id="hours" name="hours">
                        </td>
                        <td>
                            <p id="currentTotal"></p>
                        </td>
                        <td>
                            <input type="text" id="yeartodate" name="yeartodate">
                        </td>
                    </tr>
                    <tr>
                        <td>Overtime</td>
                        <td>
                            <input type="text" id="overtrate" name="rate">
                        </td>
                        <td>
                            <input type="text" id="overthours" name="hours">
                        </td>
                        <td>
                            <p id="overtcurrentTotal"></p>
                        </td>
                        <td>
                            <input type="text" id="overtyeartodate" name="yeartodate">
                        </td>
                    </tr>
                    <tr>
                        <td>Other</td>
                        <td>
                            <input type="text" id="otherrate" name="rate">
                        </td>
                        <td>
                            <input type="text" id="otherhours" name="hours">
                        </td>
                        <td>
                            <p id="othercurrentTotal"></p>
                        </td>
                        <td>
                            <input type="text" id="otheryeartodate" name="yeartodate">
                        </td>
                    </tr>
                </table>
                <br>
                <table>
                    <tr>
                        <th>Deductions</th>
                        <th>Current Total</th>
                        <th>Year to Date</th>
                    </tr>
                    <tr>
                        <td>FICA - Medicare</td>
                        <td>
                            <p id="medicare"></p>
                        </td>
                        <td>
                            <p id="medicareytd"></p>
                        </td>
                    </tr>
                    <tr>
                        <td>FICA - Social Security</td>
                        <td>
                            <p id="ss"></p>
                        </td>
                        <td>
                            <p id="ssytd"></p>
                        </td>
                    </tr>
                    <tr>
                        <td>Federal Tax</td>
                        <td>
                            <p id="fedtax"></p>
                        </td>
                        <td>
                            <p id="fedytd"></p>
                        </td>
                    </tr>
                    <tr>
                        <td>State Tax</td>
                        <td>
                            <p id="statetax"></p>
                        </td>
                        <td>
                            <p id="stateytd"></p>
                        </td>
                    </tr>
                    <tr>
                        <td>Other</td>
                        <td>
                            <p id="other"></p>
                        </td>
                        <td>
                            <p id="otherytd"></p>
                        </td>
                    </tr>
                </table>
                <br>
                
            </form>
        </div>
    </div> <!-- /container -->

    <script type="text/javascript">
        function convertHTMLtoPDF() {
            const { jsPDF } = window.jspdf;

            let doc = new jsPDF('l', 'mm', [1500, 1400]);
            let pdfjs = document.querySelector('#divID');

            doc.html(pdfjs, {
                callback: function (doc) {
                    doc.save("newpdf.pdf");
                },
                x: 12,
                y: 12
            });
        }

        const rate = document.getElementById("rate");
        const hours = document.getElementById("hours");
        const yeartodate = document.getElementById("yeartodate");
        let currentTotal = document.getElementById('currentTotal');



        // function rateCalc(rateinp, hoursinp) {
        //     //check if rate is a number
        //     if(rateinp[0] == '$') {
        //         rateinp = rateinp.replace('$', ''); //turns into a decimal str
        //     } //remove dollar sign to turn into float and calculate hours x rate
        //     //calculate current Total by rate x hours
        //     currentTotal = (parseFloat(rateinp) * parseFloat(hoursinp)).toString();

        // }

        rate.addEventListener("change", rateCalc);

        hours.addEventListener("change", hoursCalc);

        yeartodate.addEventListener("change", ytdCalc);

        function rateCalc(e) {
            let value = e.target.value; //get dollar amount
            if (value[0] == '$') {
                value = value.replace('$', '');
            }
            if (hours.value != null || hours.value != '') {
                total = parseFloat(value) * parseFloat(hours.value);
                currentTotal.textContent = total;
            }
            
        }

        function hoursCalc(e) {
            let value = e.target.value;
            if (parseFloat(value)) {
                if (rate.value != null || rate.value != '') {
                    total = parseFloat(value) * parseFloat(removesign(rate.value));
                    currentTotal.textContent = total;
                }
            }
        }

        function removesign(e) {
            if(e[0] == '$') {
                return e.replace('$', '')
            }
        }

        function ytdCalc(e) {
            let val = e.target.value;
            if (parseFloat(val)) {
                yeartodate.value = parseFloat(val) + parseFloat(currentTotal.textContent);
            }
        }
    </script>
</body>

</html>